---
layout: default
title: Blog
---

<!-- main js script includes are in _layouts/default.html -->

<h1>current weather</h1>
<!-- https://weatherwidget.io/ -->
<a class="weatherwidget-io" href="https://forecast7.com/en/48d2116d37/vienna/" data-label_1="VIENNA" data-label_2="WEATHER" data-font="Open Sans" data-icons="Climacons Animated" data-mode="Current" data-theme="pure" >VIENNA WEATHER</a>
<script>
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
</script>

<h1>current sun data</h1>
<p id="sunAngle"></p>
<p id="sunPosition"></p>

map:
<div id="map" style="height: 400px;"></div>

<script>
// https://www.npmjs.com/package/suncalc

const now = new Date();

const latitude = 48.210033; 
const longitude = 16.363449;

const sunPosition = SunCalc.getPosition(now, latitude, longitude);
const sunAltitude = sunPosition.altitude * (180 / Math.PI);

document.getElementById('sunAngle').textContent = `Sun's altitude: ${sunAltitude.toFixed(2)} degrees`;
document.getElementById('sunPosition').textContent = `position(azimuth): ${sunPosition.azimuth.toFixed(2)} degrees`;
</script>
  
 
<script>

let map;
let center;

var poslng=16.39054876321797;
var poslat=48.210862381899666;

async function initMap() {
  const { Map } = await google.maps.importLibrary("maps");

  center = { lat: poslat, lng: poslng };
  map = new Map(document.getElementById("map"), {
    center: center,
    zoom: 14,
    mapId: 'DEMO_MAP_ID' //TODO see aera
  });

  const { AdvancedMarkerElement, PinElement } = await google.maps.importLibrary("marker");
  const pinScaled = new PinElement({      scale: 2,  });
  const markerView = new AdvancedMarkerElement({
        map,
        position: { lat: poslat, lng: poslng },
        title: 'circle',
        content: pinScaled.element
      });
      
  findPlaces();
}
// maybe checkout https://developers.google.com/maps/documentation/javascript/geolocation

// https://developers.google.com/maps/documentation/javascript/reference/3.54/place?hl=en

// https://developers.google.com/maps/documentation/places/web-service/place-types#food-and-drink
async function findPlaces() {

  const { Place } = await google.maps.importLibrary("places");
  const { AdvancedMarkerElement, PinElement } = await google.maps.importLibrary("marker");
  const { Circle } = await google.maps.importLibrary("core");
  const mycircle= new google.maps.Circle ( 
    {center: {lat: poslat, lng: poslng}, radius: 500} );

  const { LatLngBounds } = await google.maps.importLibrary("core");
  var radiusInMeters=1000/2;
  var radiusInDegrees = radiusInMeters / 111300;
  var mybounds = new google.maps.LatLngBounds({lat: poslat-radiusInDegrees, lng: poslng-radiusInDegrees}, // sw
                                              {lat: poslat+radiusInDegrees, lng: poslng+radiusInDegrees}); // ne
   
  // https://developers.google.com/maps/documentation/javascript/reference/place#SearchByTextRequest
  const request = {
    textQuery: "cafe in vienna, austria",
    fields: ["displayName", "location", "businessStatus"],
    includedType: "cafe",
    //isOpenNow: true,
    language: "en-US",
    maxResultCount: 5,
    region: "at",
    useStrictTypeFiltering: false,
    // rankBy: SearchByTextRankBy.DISTANCE // already the default
    //locationBias: mycircle
    locationRestriction: mybounds
  };
  const { places } = await Place.searchByText(request);

  if (places.length) {
    //console.log(places);

    const { LatLngBounds } = await google.maps.importLibrary("core");
    
    const bounds = new LatLngBounds();
       
    places.forEach((place) => {
      const markerView = new AdvancedMarkerElement({
        map,
        position: place.location,
        title: place.displayName,
      });
      bounds.extend(place.location);
      
      console.log(place.g.displayName, place.g.buisnessStatus );
     
    });
    map.setCenter(bounds.getCenter());
  } else {
    console.log("No results");
  }
}

initMap();


// unten liquid:
 //{{   place.content | markdownify }}
  </script>


  <script src="assets/js/main.js"></script>

<h1>All Places</h1>

{% for place in site.places %}
  <h2> <a href="{{ place.url }}">{{ place.name }} </a></h2>
    outlook: {{ place.outlook }} <br>
    website: <a href="{{ place.web }}">{{ place.web }}</a> <br>
    maps: <a href="{{ place.maps }}">{{ place.address }}</a> <br>
    sun: <a href="{{ place.sun }}">sonnen verlauf</a> <br>
  <p> </p><br>
{% endfor %}