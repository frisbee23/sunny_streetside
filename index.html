---
layout: default
title: Blog
---

<!-- main js script includes are in _layouts/default.html -->

<h1>current weather</h1>
<!-- https://weatherwidget.io/ -->
<a class="weatherwidget-io" href="https://forecast7.com/en/48d2116d37/vienna/" data-label_1="VIENNA" data-label_2="WEATHER" data-font="Open Sans" data-icons="Climacons Animated" data-mode="Current" data-theme="pure" >VIENNA WEATHER</a>
<script>
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
</script>

<h1>current sun data</h1>
<p id="sunAngle"></p>
<p id="sunPosition"></p>

map:
<div id="map" style="height: 400px;"></div>

  <script>
    // https://www.npmjs.com/package/suncalc

    const now = new Date();

    const latitude = 48.210033; 
    const longitude = 16.363449;

    const sunPosition = SunCalc.getPosition(now, latitude, longitude);
    const sunAltitude = sunPosition.altitude * (180 / Math.PI);

    document.getElementById('sunAngle').textContent = `Sun's altitude: ${sunAltitude.toFixed(2)} degrees`;
    document.getElementById('sunPosition').textContent = `position(azimuth): ${sunPosition.azimuth.toFixed(2)} degrees`;
  </script>
  
 
  <script>
   
    (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})({
      key: keys_google_places_api,
      v: "beta",
    });

let map;
let center;

async function initMap() {
  const { Map } = await google.maps.importLibrary("maps");

  center = { lat: 48.210033, lng: 16.363449 };
  map = new Map(document.getElementById("map"), {
    center: center,
    zoom: 14,
    // ...
  });
  findPlaces();
}


// https://developers.google.com/maps/documentation/javascript/reference/3.54/place?hl=en
// https://developers.google.com/maps/documentation/places/web-service/place-types#food-and-drink
async function findPlaces() {


  const { LatLngBounds } = await google.maps.importLibrary("core");

  var bounds = new google.maps.LatLngBounds(new google.maps.LatLng(48.210033, 16.363449),
                                            new google.maps.LatLng(48.210033, 16.363449));

  const { Place } = await google.maps.importLibrary("places");
  //@ts-ignore
  const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");
  const request = {
    textQuery: "cafes in vienna, austria",
    fields: ["displayName", "location", "businessStatus"],
    includedType: "cafe",
    isOpenNow: true,
    language: "en-US",
    maxResultCount: 10,
    region: "at",
    useStrictTypeFiltering: false,
    // rankBy: SearchByTextRankBy.DISTANCE // already the default
    //locationRestriction: bounds
  };
  //@ts-ignore
  const { places } = await Place.searchByText(request);

  if (places.length) {
    console.log(places);

    const { LatLngBounds } = await google.maps.importLibrary("core");
    const bounds = new LatLngBounds();

   
    places.forEach((place) => {
      /*const markerView = new AdvancedMarkerElement({
        map,
        position: place.location,
        title: place.displayName,
      });
      bounds.extend(place.location);
      */
      console.log(place);
    });
    //map.setCenter(bounds.getCenter());
  } else {
    console.log("No results");
  }
}

initMap();
  </script>


  <script src="assets/js/main.js"></script>

<h1>All Places</h1>

{% for place in site.places %}
  <h2> <a href="{{ place.url }}">{{ place.name }} </a></h2>
    outlook: {{ place.outlook }} <br>
    website: <a href="{{ place.web }}">{{ place.web }}</a> <br>
    maps: <a href="{{ place.maps }}">{{ place.address }}</a> <br>
    sun: <a href="{{ place.sun }}">sonnen verlauf</a> <br>
  <p> {{ // place.content | markdownify }}</p><br>
{% endfor %}